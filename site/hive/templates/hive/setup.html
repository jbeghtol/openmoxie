{% extends 'base.html' %}
{% block content %}
<div class="text-bg-secondary p-3">
<h1>Welcome to OpenMoxie!</h1>
<p>
    The OpenMoxie service allows this computer to act as a replacement for Moxie's cloud infrastructure.
    There are a few requirements to setup before you can use this with your Moxie.  The primary requirement
    is your own personal API key from OpenAI.
</p>
<p>
    This API key will be used for:
    <ul>
        <li>Speech to Text - Using OpenAI's Whisper model</li>
        <li>OpenAI Chat Inferences - Using one of OpenAI's conversational models</li>
    </ul>
    These services are not free and you will be responsible for managing your OpenAI account to ensure
    it has sufficient credits, however Whisper is very inexpensive and the default conversational model
    (3.5 turbo) is a very economical model.
</p>
<h3>Getting Your Own API Key</h3>
<p>
    You will need to visit OpenAI's website, create an account, add your credit card, and purchase some credits.  We recommend
    starting with a small amount such as $10 and keeping an eye on your usage until you understand the costs, though they are typically modest.
    First, go to the <a class="link-light" href="https://platform.openai.com/settings/organization/billing/overview">OpenAI Billing</a> page.  You need
    to make an account if you don't already have one and buy some credits.
</p>
<p>
    Next, travel to the <a class="link-light" href="https://platform.openai.com/settings/organization/api-keys">OpenAI API Keys</a> to create a unique
    API key for use with Open Moxie.  Give it a nice name like "Moxie Services" and save the API key to paste into the form below.
</p>
<h1>Configuration</h1>
<form id="hive_edit" action="{% url 'hive:hive_configure' %}" method="post">
    {% csrf_token %}
    <div class="mb-3">
      <label for="apikey" class="form-label">OpenAI API Key</label>
      <input type="text" class="form-control" name="apikey" id="apikey" aria-describedby="apiHelp" placeholder="Paste OpenAI API Key here">
      <div id="apiHelp" class="form-text text-light">This be be stored in your local database.</div>
    </div>
    <div class="mb-3">
      <label for="hostname" class="form-label">Hostname</label>
      <input type="text" class="form-control" name="hostname" id="hostname" aria-describedby="hostnameHelp" placeholder="Enter computer name">
      <div id="hostnameHelp" class="form-text text-light">The local network name of this computer, either your computer name or LAN network address.</div>
    </div>
    {% if needs_admin %}
    <h3>Database Administrator</h3>
    <div class="row mb-3">
      <label for="adminUser" class="col-sm-2 col-form-label">Admin User</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="adminUser" name="adminUser" value="admin">
      </div>
    </div>
    <div class="row mb-3">
      <label for="inputPassword3" class="col-sm-2 col-form-label">Admin Password</label>
      <div class="col-sm-10">
        <input type="password" class="form-control" id="inputPassword3" name="adminPassword">
      </div>
    </div>
    {% endif %}
<!--
    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input" name="allowall" id="allowall" aria-describedby="allowHelp">
      <label class="form-check-label" for="allowall">Allow Services to Any Moxie</label>
      <div id="hostnameHelp" class="form-text text-light">Check this to allow use by any Moxie on your network, otherwise each will need to be authorized explicity.</div>
    </div>
 -->
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
{% endblock %}